

#### 1.æ¨¡å—æ‰“åŒ…å·¥å…·çš„ç”±æ¥

- ç¼–è¯‘ä»£ç --æ–°ç‰¹æ€§ä»£ç ç¼–è¯‘
- æ¨¡å—æ‰“åŒ…--æ¨¡å—åŒ–JavaScript æ‰“åŒ…
- æ”¯æŒä¸åŒç±»å‹çš„èµ„æºæ¨¡å—

#### 2.æ¨¡å—åŒ–å·¥å…·æ¦‚è¦

- Webpack
- æ‰“åŒ…å·¥å…·è§£å†³çš„æ—¶å‰ç«¯æ•´ä½“çš„æ¨¡å—åŒ– å¹¶ä¸å•æŒ‡JavaScript æ¨¡å—åŒ–

#### 3.Webpack å¿«é€Ÿä¸Šæ‰‹

#### 4.Webpacké…ç½®æ–‡ä»¶

- `webpack.config.js` 

  ```javascript
  const path = require('path')
  module.exports = {
  	entry:'./scr/man.js',
    output:{
      filename:'build.js',
      path:path.join(__dirname,'output') // path å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„
    }
  }
  ```

> output.path å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„
>
> Webpack åªæ˜¯æ‰“åŒ…å·¥å…·ï¼ŒåŠ è½½å™¨å¯ä»¥ç”¨æ¥ç¼–è¯‘è½¬æ¢ä»£ç 
>
> Webpack æœ¬èº«åªèƒ½æ‰“åŒ…JavaScriptæ–‡ä»¶ï¼Œå…¶å®ƒèµ„æºæ˜¯éœ€è¦loader
>
> TreeShaking åœ¨ç”Ÿäº§æ¨¡å¼ä¼šè‡ªåŠ¨å¼€å¯ï¼Œå®ƒæ˜¯ä¸€ç»„åŠŸèƒ½æ­é…ä½¿ç”¨åçš„æ•ˆæœï¼Œå…¶ä¸­usedExports è´Ÿè´£æ ‡è®°ï¼ˆæ¯æ ‘å¶ï¼‰ï¼ŒsideEffects ä¸€èˆ¬ç”¨äºnpm åŒ…æ ‡è®°æ˜¯å¦æœ‰å‰¯ä½œç”¨

#### 5.Webpack å·¥ä½œæ¨¡å¼

 `development`ã€`production` ã€ `none`

```javascript
module.exports = {
  mode: 'production'
};
```

#### 6.Webpack æ‰“åŒ…ç»“æœè¿è¡ŒåŸç†

- æ‰“åŒ…ç»“æœæœ€å¤–å±‚æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œæ¨¡å—ä»£ç é€šè¿‡å‚æ•°ä¼ å…¥

- å†…éƒ¨é€šè¿‡`__webpack_require__` å‡½æ•°åŠ è½½æ¨¡å—ï¼Œ

  ```javascript
  /******/ 	function __webpack_require__(moduleId) {
  /******/
  /******/ 		// Check if module is in cache
  /******/ 		if(installedModules[moduleId]) {
  /******/ 			return installedModules[moduleId].exports;
  /******/ 		}
  /******/ 		// Create a new module (and put it into the cache)
  /******/ 		var module = installedModules[moduleId] = {
  /******/ 			i: moduleId,
  /******/ 			l: false,
  /******/ 			exports: {}
  /******/ 		};
  /******/
  /******/ 		// Execute the module function
  /******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
  /******/
  /******/ 		// Flag the module as loaded
  /******/ 		module.l = true;
  /******/
  /******/ 		// Return the exports of the module
  /******/ 		return module.exports;
  /******/ 	
  ```

#### 7.webpack èµ„æºæ¨¡å—åŠ è½½

- `css-loader`

- å¤šäº†ä¸ªloader çš„æ—¶å€™ useré‡Œé¢çš„loader æ˜¯ä»ä¸‹å¾€ä¸Šè¿è¡Œçš„

  ```javascript
  module:{
      rules:[
        {
          test:/.css$/,
          use:[
            'style-loader',
            'css-loader'
          ]
        }
      ]
    }
  ```

#### 8.Webpack å¯¼å…¥èµ„æºæ¨¡å—

- `element.classList.add('heading') `ç±»å
- æ–°äº‹ç‰©çš„æ€æƒ³æ‰æ˜¯çªç ´ç‚¹
  - javaScript é©±åŠ¨æ•´ä¸ªå‰ç«¯åº”ç”¨

#### 9.Webpack æ–‡ä»¶èµ„æºåŠ è½½å™¨

- `file-loader`

  - æ–‡ä»¶è·¯å¾„

    ```javascript
    output: {
        filename: 'bundle.js',
        path: path.resolve(__dirname, 'dist'),
        publicPath:'dist/'  // èµ„æºæ‰“åŒ…ä¹‹åçš„è·¯å¾„è®¾ç½®
    }
    ```

#### 10.Webpack URL åŠ è½½å™¨

- Data URLs ä¸ url-loader.

  - `url-loader` æŠŠå›¾ç‰‡è½¬ base64 å›¾ç‰‡

    ```javascript
    {
      test:/.png$/,
      use:{
      loader: 'url-loader'ï¼Œ
      options:{
      	limit:10*1024 // å°äº10*1024 çš„æ‰ç”¨url-loader è½¬åŒ–ä¸ºbase64ï¼Œ å¤§äºçš„è¿˜ç”¨file-loader
      }
    }
    ```

    

- data URLs ï¼š åè®®+åª’ä½“ç±»å‹å’Œç¼–ç +æ–‡ä»¶å†…å®¹

  - `data:text/html;charset=UTF-8,<h1>html content</h1>`
  - å­—ä½“ã€å›¾ç‰‡ æ–‡ä»¶å†…å®¹base64 ç¼–ç  
    - `data:image/png;base64,IVBOSJLJDSLFJLSJDF...Susdu`

- å°æ–‡ä»¶ä½¿ç”¨Data URLsï¼Œ å‡å°‘è¯·æ±‚æ¬¡æ•°

- å¤§æ–‡ä»¶å•ç‹¬æå–å­˜æ”¾ï¼Œæé«˜åŠ è½½é€Ÿåº¦

#### 11.Webpack å¸¸ç”¨åŠ è½½å™¨åˆ†ç±»

- ç¼–è¯‘è½¬åŒ–ç±»å‹åŠ è½½å™¨
  - css-loader
- æ–‡ä»¶æ“ä½œç±»å‹åŠ è½½å™¨
  - file-loader
- ä»£ç æ£€æŸ¥ç±»å‹åŠ è½½å™¨
  - eslint-loader

#### 12.Webpack ä¸ ES2015

- Webpack åªæ˜¯æ‰“åŒ…å·¥å…·ï¼Œä¸ä¼šå¤„ç†es6ç­‰æ–°ç‰¹æ€§ï¼ŒåŠ è½½å™¨å¯ä»¥ç”¨æ¥ç¼–è¯‘è½¬åŒ–ä»£ç 

- `babel-loader  ` `@babel/core` `@babel/preset-env`

  - babel åªæ˜¯ä¸€ä¸ªè½¬æ¢å¹³å°ï¼Œå…·ä½“çš„è½¬åŒ–æ“ä½œï¼Œç”¨é€šè¿‡æ’ä»¶

    ```javascript
    {
      test:/.js$/,
      use:{
        loader: 'babel-loader',
        options:{
        	presets:['@babel/preset-env']
        }
      }
    },
    ```

#### 13.Webpack åŠ è½½èµ„æºçš„æ–¹å¼

- ES Modules æ ‡å‡†çš„import å£°æ˜

- CommonJs æ ‡å‡†çš„require å‡½æ•°

- AMD æ ‡å‡†çš„ define å‡½æ•° å’Œ require å‡½æ•°

- æ ·å¼ä»£ç ä¸­çš„@import æŒ‡ä»¤å’Œurl å‡½æ•°

- HTML ä»£ç ä¸­å›¾ç‰‡æ ‡ç­¾çš„src å±æ€§

- html-loader

  ```javascript
  {
    test:/.html$/,
    use:{
      loader: 'html-loader',
      options:{
        attrs:['img.src','a.href'] //html æ–‡ä»¶ä¸­çš„ img.src å’Œ a.href å¼•ç”¨æ–‡ä»¶è¿›è¡Œå¤„ç†
      }
    }
  },
  ```

#### 14.Webpackæ ¸å¿ƒå·¥ä½œåŸç†

- Loader æœºåˆ¶æ˜¯Webpack çš„æ ¸å¿ƒ

#### 15.Webpack å¼€å‘ä¸€ä¸ªLoader

- Loader è´Ÿè´£èµ„æºæ–‡ä»¶ä»è¾“å…¥åˆ°è¾“å‡ºçš„è½¬æ¢
- å¯¹äºåŒä¸€ä¸ªèµ„æºå¯ä»¥ä¸€æ¬¡ä½¿ç”¨å¤šä¸ªLoader
  - css-loader -> style-loader

```javascript
//mark.md
#å…³äºæˆ‘
æˆ‘æ˜¯wbb ï¼Œæˆ‘æ˜¯ä¸€ä¸ªæ‰‹è‰ºäºº

//main.js

import './mark.md'

//webpack é…ç½®
rules:[
  {
    test: /.md$/,
    use: './markdown-loader'
  },
]

// markdown-loader.js
const marked = require('marked')
module.exports = source =>{
  // console.log(source)
  // return 'hello,world'
  const html = marked(source)
 // return `export default  ${JSON.stringify(html)}` // webpack ä¼šæŠŠes module è‡ªåŠ¨è½¬åŒ–
  return `module.exports =   ${JSON.stringify(html)}`
 // return html æˆ–è¿”å›html äº¤ç»™ä¸‹ä¸€ä¸ªæ¨¡å— html-loader
}
```

#### 16.Webpack æ’ä»¶æœºåˆ¶ä»‹ç»

- å¢å¼ºWebpack è‡ªåŠ¨åŒ–èƒ½åŠ›
- Loader ä¸“æ³¨å®ç°èµ„æºæ¨¡å—åŠ è½½
- Plugin è§£å†³å…¶ä»–è‡ªåŠ¨åŒ–å·¥ä½œ
  - e.g.æ¸…æ¥šdist ç›®å½•
  - æ‹·è´é™æ€æ–‡ä»¶
  - å‹ç¼©ä»£ç 

#### 17.Webpack è‡ªåŠ¨æ¸…é™¤è¾“å‡ºç›®å½•æ’ä»¶

- Webpack å¸¸ç”¨æ’ä»¶
  - clean-webpack-plugin

#### 18.Webpack è‡ªåŠ¨ç”ŸæˆHTMLæ’ä»¶ï¼ˆä¸Šï¼‰

- html-webpack-plugin
  - æ ¹æ®webpack.config.js é…ç½® publicPath æ–‡ä»¶å¼•ç”¨è·¯å¾„çš„

#### 19.Webpack è‡ªåŠ¨ç”ŸæˆHTMLæ’ä»¶ï¼ˆä¸­ï¼‰

- html-webpack-plugin é…ç½®é€‰é¡¹

  ```javascript
  new HtmlWebpackPlugin({
    title:'Webpack Plugin Sample',
    meta:{
    	viewport:'width=device-width'
    },
    template:'./src/index.html'
  })
  //æ¨¡æ¿è¯­æ³•
  // <h1><%= htmlWebpackPlugin.options.title %></h1>
  ```

#### 20.Webpack è‡ªåŠ¨ç”ŸæˆHTMLæ’ä»¶ï¼ˆä¸‹ï¼‰

- åŒæ—¶è¾“å‡ºå¤šä¸ªHTMLæ–‡ä»¶

  - åˆ›å»ºå¤šä¸ª HtmlWebpackPlugin å¯¹è±¡

    ```javascript
    plugins:[
        new CleanWebpackPlugin(),
        // ç”¨äºç”Ÿæˆ index.html
        new HtmlWebpackPlugin({
          title:'Webpack Plugin Sample',
          meta:{
            viewport:'width=device-width'
          },
          template:'./src/index.html'
        }),
        // ç”¨äºç”Ÿæˆ about.html
        new HtmlWebpackPlugin({
          filename:'about.html'
        })
      ]
    ```

#### 21.Webpackæ’ä»¶ä½¿ç”¨æ€»ç»“

- copy-webpack-plugin & æ€»ç»“

  æŠŠä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶ï¼Œæ‹·è´åˆ°è¾“å‡ºç›®å½•

- æ‰¾æ’ä»¶æ­¥éª¤ï¼š éœ€æ±‚->å…³é”®è¯->æœç´¢

#### 22.Webpack å¼€å‘ä¸€ä¸ªæ’ä»¶

- æ’ä»¶æœºåˆ¶çš„å·¥ä½œåŸç†

  - ç›¸æ¯”äºLoaderï¼ŒPluginæ‹¥æœ‰æ›´å®½çš„èƒ½åŠ›èŒƒå›´
  - Plugin é€šè¿‡é’©å­æœºåˆ¶å®ç°
  - æ’ä»¶å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–è€…æ˜¯ä¸€ä¸ªåŒ…å«apply æ–¹æ³•çš„å¯¹è±¡
  - é€šè¿‡åœ¨ç”Ÿå‘½å‘¨æœŸçš„é’©å­ä¸­æŒ‚è½½å‡½æ•°å®ç°æ‰©å±•

- ç§»é™¤æ‰“åŒ…js ä¸­çš„ æ³¨é‡Šæ’ä»¶

  ```javascript
  //æ’ä»¶
  class MyPlugin{
    apply(compiler){
      console.log('MyPlugin å¯åŠ¨')
      compiler.hooks.emit.tap('MyPlugin',compilation => {
        // compilation =ã€‹ å¯ä»¥ç†è§£ä¸ºæ­¤æ¬¡æ‰“åŒ…çš„ä¸Šä¸‹æ–‡
        for (const name in compilation.assets ){
          console.log(name)
          console.log(compilation.assets[name].source())
          if(name.endsWith('.js')){
            const contents = compilation.assets[name].source()
            const widthoutComments = contents.replace(/\/\*\*+\//g, '')
            compilation.assets[name] = {
              source: () => widthoutComments,
              size: () => widthoutComments.length
            }
          }
        }
      })
    }
  }
  
  //é…ç½®
  plugins:[
    new MyPlugin()
  ]
  ```

#### 23.Webpack å¼€å‘ä½“éªŒé—®é¢˜

- Http Server è¿è¡Œ
- è‡ªåŠ¨ç¼–è¯‘+åˆ·æ–°æµè§ˆå™¨
- æä¾›soucemapæ”¯æŒ

#### 24.Webpack è‡ªåŠ¨ç¼–è¯‘

- watch å·¥ä½œæ¨¡å¼

  `webpack --watch`

#### 25.Webpack  è‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨

- `browser-sync dist --files "**/*"` ç”¨browser-sync ç›‘å¬æ–‡ä»¶å˜åŒ–åˆ·æ–°æµè§ˆå™¨
  - åŸç†ï¼šWebpack æ‰“åŒ…åˆ°dist ç›®å½• ï¼Œæ–‡ä»¶å‘ç”Ÿå˜åŒ–è§¦å‘ browser-syncåˆ·æ–°æµè§ˆå™¨

#### 26.Webpack Dev Server

- `npm install webpack-dev-server --save-dev`

- é›†æˆ è‡ªåŠ¨ç¼–è¯‘ å’Œ è‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ ç­‰åŠŸèƒ½
- å°†æ‰“åŒ…ç»“æœå­˜æ”¾åœ¨å†…å­˜å½“ä¸­ï¼Œæä¾›æ„å»ºæ•ˆç‡
- webpack-dev-server ä¹Ÿä¼šé»˜è®¤ä» `publicPath` ä¸ºåŸºå‡†ï¼Œä½¿ç”¨å®ƒæ¥å†³å®šåœ¨å“ªä¸ªç›®å½•ä¸‹å¯ç”¨æœåŠ¡ï¼Œæ¥è®¿é—® webpack è¾“å‡ºçš„æ–‡ä»¶ã€‚

#### 27.Webpack Dev Server é™æ€èµ„æºè®¿é—®

- `devServer.contentBase` 

  å‘Šè¯‰æœåŠ¡å™¨ä»å“ªé‡Œæä¾›å†…å®¹ã€‚åªæœ‰åœ¨ä½ æƒ³è¦æä¾›é™æ€æ–‡ä»¶æ—¶æ‰éœ€è¦ã€‚[`devServer.publicPath`](https://www.webpackjs.com/configuration/dev-server/#devserver-publicpath-) å°†ç”¨äºç¡®å®šåº”è¯¥ä»å“ªé‡Œæä¾› bundleï¼Œå¹¶ä¸”æ­¤é€‰é¡¹ä¼˜å…ˆ

#### 28.Webpack Dev Server ä»£ç† Api

- `api.github.com` github 

#### 29.Source Map ä»‹ç»

#### 30.Webpack é…ç½® Source Map

â€‹	è®¾ç½®devTool å±æ€§

â€‹	`devTool:true `

â€‹	This option controls if and how source maps are generated.

#### 31.Webpack eval æ¨¡å¼çš„Source Map

#### 32.Webpack devtool æ¨¡å¼å¯¹æ¯” ï¼ˆä¸Šï¼‰

#### 33.Webpack devtool æ¨¡å¼å¯¹æ¯”ï¼ˆä¸‹ï¼‰

#### 34.Webpack é€‰æ‹©Soucre Map æ¨¡å¼

- å¼€å‘æ¨¡å¼ï¼š
  - æ¨èï¼ševal-cheap-module-source-map
    - ä»£ç æ¯è¡Œä¸ä¼šè¶…è¿‡80ä¸ªå­—ç¬¦ï¼Œ
    - ä»£ç ç»è¿‡loader è½¬åŒ–è¿‡åçš„å·®å¼‚è¾ƒå¤§ï¼Œç”¨moduel æ¨¡å¼
    - é¦–æ¬¡æ‰“åŒ…é€Ÿåº¦æ…¢æ— æ‰€è°“ï¼Œé‡å†™æ‰“åŒ…ç›¸å¯¹è¾ƒå¿«
- ç”Ÿäº§æ¨¡å¼ï¼šnone ä¸ç”Ÿæˆsource-map

#### 36.Webpack HMRä½“éªŒ

#### 37.Webpack å¼€å¯HMR

â€‹	  HMRé›†æˆåœ¨webpack -dev-server ä¸­ é…ç½®

```javascript
devServer:{
	hot:true
}

//å¹¶å¯¼å…¥webpack å†…ç½®hotæ’ä»¶
plugins:[
  new webpack.HotModuleReplacementPlugin()
]
```

â€‹	

#### 38.Webpack HMR çš„ç–‘é—®

#### 39.Webpack ä½¿ç”¨HMR API

#### 40.Webpack å¤„ç†JSæ¨¡å—çƒ­æ›¿æ¢

#### 41.Webpack å¤„ç†å›¾ç‰‡æ¨¡å—çƒ­æ›¿æ¢

#### 42.Webpack HMR æ³¨æ„äº‹é¡¹

#### 43.Webpack ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–

#### 44.Webpack ä¸åŒç¯å¢ƒä¸‹çš„é…ç½®

#### 45.Webpoack ä¸åŒç¯å¢ƒçš„é…ç½®æ–‡ä»¶

#### 46.Webpack DefinePlugin

#### 47.Webpack ä½“éªŒTreeShaking

#### 48.Webpack ä½¿ç”¨Tree Shaking

- optimization å±æ€§ ç»“åˆä½¿ç”¨

#### 49.Webpack åˆå¹¶æ¨¡å—

- concatenatemodule

  å°½å¯èƒ½å°†æ‰€æœ‰æ¨¡å—è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶, scope Hoisting

#### 50.Tree-shaking & Babel

- ç”±Webpack æ‰“åŒ…çš„ä»£ç å¿…é¡»ä½¿ç”¨ESM
- æœ€æ–°çš„babel ä¼šé»˜è®¤å…³é—­ æŠŠESM è½¬åŒ–æˆcommonJsï¼Œæ‰€ä»¥æœ€æ–°çš„Tree-shaking ä¸ä¼šå¤±æ•ˆ

#### 51.Webpack sideEffects

#### 52.Webpack sideEffects æ³¨æ„

#### 53.Webpack ä»£ç åˆ†å‰²

- å¤šå…¥å£æ‰“åŒ…
- åŠ¨æ€å¯¼å…¥

#### 54.Webpack å¤šå…¥å£æ‰“åŒ…

- entry é…ç½®ä¸ºä¸€ä¸ªå¯¹è±¡

#### 55.Webpack æå–å…¬å…±æ¨¡å—

#### 56.Webpack åŠ¨æ€å¯¼å…¥

#### 57.Webpack é­”æ³•æ³¨é‡Š

#### 58.Webpack MiniCssExtractPlugin

#### 59.Webpoack OptimizeCsssAssetsWebpackPlugin

#### 69.Webpack è¾“å‡ºæ–‡ä»¶å Hash









